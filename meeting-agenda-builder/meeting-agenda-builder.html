<head>
	<title>meeting-agenda-builder</title>
</head>

<body>
	{{#if scheduleChosen}}
		{{> scheduleView}}
	{{else}}
		{{> loginView}}
	{{/if}}

	{{fixed}}
</body>

<template name="scheduleView">
	<div id="mainFrame">
		{{> header}}

		{{#unless viewAsList}}
			{{> parkedActivitiesView}}
			{{> daysView}}
		{{else}}
			{{> listView}}
		{{/unless}}

		{{> newDayView}}
		{{> editDayView}}
		{{> newActivityView}}
		{{> editActivityView}}
	</div>
</template>

<template name="header">
	<div id="header">
		<div class="scheduleViewTop">
			<button id="toScheduleChooser" class="scheduleViewTopItem btn smallBtn">
				<img src="arrow_left.png"/>
			</button>
			{{#unless viewAsList}}
				<button id="toListView" class="scheduleViewTopItem btn smallBtn">
					<img src="list_view_icon_4.png"/>
				</button>
			{{else}}
				<button id="toScheduleView" class="scheduleViewTopItem btn smallBtn">
					<img src="schedule_view_icon.png" class="buttonImage"/>
				</button>
			{{/unless}}
			{{#unless editScheduleTitle}}
				<div class="scheduleViewTopItem title" id="scheduleTitle">{{scheduleTitle}}</div>
			{{else}}
				<form class="scheduleViewTopItem" id="scheduleTitleForm">
					<input id="scheduleTitleInput" type="text" value="{{scheduleTitle}}" name="scheduleTitle"/>
					<button type="submit" class="topButton">Save</button>
				</form>
			{{/unless}}
		</div>
		<button class="btn smallBtn" id="addDay">✚ Day</button>
		<div class="infoBox">
			<table class="infoBoxTable">
				<tr>
					<td>
						<div class="blob presentation"></div>Presentation
					</td>
					<td>
						<div class="blob discussion"></div>Discussion
					</td>
				</tr>
				<tr>
					<td>
						<div class="blob group_work"></div>Group work
					</td>
					<td>
						<div class="blob break"></div>Break
					</td>
				</tr>
			</table>
		</div>
	</div>
</template>

<template name="parkedActivitiesView">
	<div id="parkedActivitiesView">
		<div id="parkedActivitiesHeader">
			<h4>Parked activities</h4>
			<button class="btn center" id="addActivityButton">✚ Activity</button>
		</div>
		<ul class="activityList connectLists parkedActivityList" id="{{listID}}">
			{{#each parkedActivities}}
				{{> activity}}
			{{/each}}
		</ul>
	</div>
</template>

<template name="activity">
	<li id="{{activityID}}" parentid="{{parentList}}" position="{{pos}}" class="activityObject">
		<div class="activityTime">
			{{#if activityStartSet}}
				{{startTimeHuman}}
			{{else}}
				{{activityLength}} min
			{{/if}}
		</div>

		<div class="activityInfo" style="height: {{activityHeight}}px">
			<div class="activityTitle">
				<div class="editActivity">✎</div>
				<div class="activityName">{{title}}</div>
				<div class="typeIndicator {{type}}"></div>
			</div>
			{{#if location}}
				<div class="activityLocation">
					{{location}}
				</div>
			{{/if}}
			<div class="activityDescription">
				{{description}}
			</div>
		</div>
	</li>
</template>

<template name="daysView">
	<div id="daysViewContainer">
		<div id="daysView" style="width: {{daysViewWidth}}px">
			<ul id="daysList">
				{{#each days}}
					{{> day}}
				{{/each}}
			</ul>
		</div>
	</div>

	{{> diagramExplanationModal}}
</template>

<template name="day">
	<div class="day" id="{{_id}}">
		<div class="dayHeader">
			<div class="diagramContainer">
				{{#if anyActivities}}
					<div class="diagramLine"></div>
					<div class="diagram presentation" style="height: {{presentationHeight}}%"></div>
					<div class="diagram group_work" style="height: {{groupWorkHeight}}%"></div>
					<div class="diagram discussion" style="height: {{discussionHeight}}%"></div>
					<div class="diagram break" style="height: {{breakHeight}}%"></div>
				{{/if}}
			</div>
			<div class="diagramInfo">
				30 % breaks ➤
			</div>

			<div class="editDay">✎</div>
			<h4>Day {{dayNumber}}</h4>
			<div class="dayName">
				{{#if addDayTitle}}{{dayTitle}}{{/if}}
			</div>
			{{#if addWeather}}
				{{> weather}}
			{{/if}}
			<table class="dayInfoTable">
				<tr>
					<td colspan="2">
						<form class="startTime">
							Start time
							<select class="smallSelect hoursList noBorderRight" name="startHours">
								{{> hoursList}}
							</select>
							<select class="smallSelect minutesList noBorderLeft" name="startMinutes">
								{{> minutesList}}
							</select>
						</form>
					</td>
				</tr>
				<tr>
					<td colspan="2">
						{{#if addDate}}
							{{date}}
						{{/if}}
					</td>
				</tr>
				<tr>
					<td>
						Length {{dayLength}}
					</td>
					<td>
						End {{dayEnd}}
					</td>
				</tr>
			</table>
			
		</div>

		<ul class="activityList connectLists dayActivityList" id="{{listID}}">
			{{#each activities}}
				{{> activity}}
			{{/each}}
		</ul>


	</div>
</template>

<template name="hoursList">
	{{#each hours}}
		{{#if selected}}
			<option value="{{this}}" selected="selected">{{this}}</option>
		{{else}}
			<option value="{{this}}">{{this}}</option>
		{{/if}}
	{{/each}}
</template>

<template name="minutesList">
	{{#each minutes}}
		{{#if selected}}
			<option value="{{this}}" selected="selected">{{this}}</option>
		{{else}}
			<option value="{{this}}">{{this}}</option>
		{{/if}}
	{{/each}}
</template>
