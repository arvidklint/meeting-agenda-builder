<head>
	<title>meeting-agenda-builder</title>
</head>

<body>
	{{#if scheduleChosen}}
		{{> scheduleView}}
	{{else}}
		{{> loginView}}
	{{/if}}

	{{fixed}}
</body>

<template name="scheduleView">
	<div id="mainFrame">
		{{> scheduleTitle}}

		{{#unless viewAsList}}
			{{> parkedActivitiesView}}
			{{> daysView}}

			{{> newDayView}}
			{{> editDayView}}
			{{> newActivityView}}
			{{> editActivityView}}
		{{else}}
			{{> listView}}
		{{/unless}}
	</div>
</template>

<template name="scheduleTitle">
	<table>
		<tr>
			<td>
				<button id="toScheduleChooser" class="floatLeft topButton">&lt;</button>
				{{#unless viewAsList}}
					<button id="toListView" class="floatLeft topButton">Ξ</button>
				{{else}}
					<button id="toScheduleView" class="floatLeft topButton">⊞</button>
				{{/unless}}
			</td>
			<td>
				{{#unless editScheduleTitle}}
					<span class="title" id="scheduleTitle">{{scheduleTitle}}</span>
				{{else}}
					<form id="scheduleTitleForm">
						<input id="scheduleTitleInput" type="text" value="{{scheduleTitle}}" name="scheduleTitle"/>
						<button type="submit">Save</button>
					</form>
				{{/unless}}
			</td>
			<td>
				<button id="syncDays" class="topButton">⇄</button>
			</td>
		</tr>
	</table>
</template>

<template name="parkedActivitiesView">
	<div id="parkedActivitiesView">
		<div id="parkedActivitiesHeader">
			<h4>Parked activities</h4>
			<button id="addActivityButton" class="center">✚ Activity</button>
		</div>
		<ul class="activityList connectLists" id="{{listID}}">
			{{#each parkedActivities}}
				{{> activity}}
			{{/each}}
		</ul>
	</div>
</template>

<template name="activity">
	<li id="{{activityID}}" parentid="{{parentList}}" position="{{pos}}" class="activityObject {{tooShort}}" style="height: {{activityHeight}}px">
		<div class="activityTime">
			{{#if activityStartSet}}
				{{startTimeHuman}}
			{{else}}
				{{activityLength}} min
			{{/if}}
		</div>

		<div class="activityInfo">
			<span class="editActivity">✎</span>
			<div class="{{type}}_color"></div>
			<div class="activityTitle">
			
				{{title}}
			</div>
			{{#if location}}
				<div class="activityLocation">
					{{location}}
				</div>
			{{/if}}
			<div class="activityDescription">
				{{description}}
			</div>
		</div>
	</li>
</template>

<template name="daysView">
	<div id="daysView">
		{{#each days}}
			{{> day}}
		{{/each}}
		<button id="addDay">✚ Day</button>
	</div>
</template>

<template name="day">
	<div class="day">
		<div class="dayHeader">
			{{#if anyActivities}}
				<div class="diagramContainer">
					<div class="diagramLine"></div>
					<div class="diagram diagramPresentation" style="height: {{presentationHeight}}%"></div>
					<div class="diagram diagramGroupWork" style="height: {{groupWorkHeight}}%"></div>
					<div class="diagram diagramDiscussion" style="height: {{discussionHeight}}%"></div>
					<div class="diagram diagramBreak" style="height: {{breakHeight}}%"></div>
				</div>
			{{/if}}

			<h4><span class="editDay">✎</span>Day {{dayNumber}}</h4>
			{{#if addDayTitle}}
				<h6>{{dayTitle}}</h6>
			{{/if}}
			{{#if addWeather}}
				{{> weather}}
			{{/if}}
			<br/>

			<form class="startTime">
				Start:
				<select class="hoursList" name="startHours">
					{{> hoursList}}
				</select>
				<select class="minutesList" name="startMinutes">
					{{> minutesList}}
				</select>
			</form>
			{{#if addDate}}
				Date: {{date}}
			{{/if}}
			<br/>
			
			Längd: {{dayLength}}<br/>
			Slut: {{dayEnd}}<br/>
			
		</div>

		<ul class="activityList connectLists" id="{{listID}}">
			{{#each activities}}
				{{> activity}}
			{{/each}}
		</ul>


	</div>
</template>

<template name="hoursList">
	{{#each hours}}
		{{#if selected}}
			<option value="{{this}}" selected="selected">{{this}}</option>
		{{else}}
			<option value="{{this}}">{{this}}</option>
		{{/if}}
	{{/each}}
</template>

<template name="minutesList">
	{{#each minutes}}
		{{#if selected}}
			<option value="{{this}}" selected="selected">{{this}}</option>
		{{else}}
			<option value="{{this}}">{{this}}</option>
		{{/if}}
	{{/each}}
</template>
